{% extends "core/layouts/dashboard_content_base.html" %}

{% load i18n %}

{% load static %}
{% load bw_guardian_tags %}

{% block dashboard_content_block %}
    <div>
        <div class="grid grid-flow-row-dense lg:grid-cols-4 md:grid-cols-1 grid-rows-1 gap-2">
            {# Start Left Aside #}
            <div class="lg:col-span-1 sm:col-span-2">
                {# Start User Card #}

                {% include "beach_wood_user/ui_widgets/user_card.html" with object=object %}

                {# End User Card #}
                {# Start Total Items Card #}

                {% include "beach_wood_user/ui_widgets/total_items_card.html" with object=object %}

                {# End Total Items Card #}
            </div>
            {# End Left Aside #}
            <div class="col-span-3">
                <div class="flex flex-col bg-white border shadow-sm rounded-xl p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7] dark:text-gray-400">
                    <div class="grid grid-flow-row-dense lg:grid-cols-2 md:grid-cols-1 grid-rows-1 gap-2">
                        {% if object.user_type == CON_BOOKKEEPER %}
                            <div>
                                <div class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]">
                                    <div class="p-4 md:p-5">
                                        <h3 class="text-xl font-bold text-gray-800 dark:text-white text-[24px]">
                                            {% translate "Past due jobs" %}
                                        </h3>
                                        <div class="mt-5">
                                            <div class="flex flex-col">
                                                <div class="-m-1.5 h-80 {{ BW_PRELINE_ROUNDED_SCROLLBAR_CSS_CLASSES }}">
                                                    <div class="p-1.5 min-w-full inline-block align-middle">
                                                        {% if object.bookkeeper.get_proxy_model.get_past_due_jobs %}
                                                            <div class="border rounded-lg shadow overflow-hidden dark:border-gray-700 dark:shadow-gray-900">
                                                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                                                        <tr class="divide-x divide-gray-200 dark:divide-gray-700">
                                                                            <th scope="col"
                                                                                width="90%"
                                                                                class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">
                                                                                {% translate "Title" %}
                                                                            </th>
                                                                            <th scope="col"
                                                                                class="px-6 py-2 text-right text-xs font-medium text-gray-500 uppercase">
                                                                                {% translate "Action" %}
                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                                                        {% for past_due_job in object.bookkeeper.get_proxy_model.get_past_due_jobs %}
                                                                            <tr>
                                                                                <td class="px-6 py-2 whitespace-nowrap font-medium text-gray-800 dark:text-gray-200 text-xs">
                                                                                    <a href="{% url 'dashboard:job:details' past_due_job.pk %}"
                                                                                       class="{{ BW_PRELINE_ANCHOR_TAG_DEFAULT_COLOR }}">
                                                                                        {{ past_due_job.title|truncatechars:DEFAULT_TEMPLATE_TABLE_LIST_TRUNCATED_STRING }}
                                                                                    </a>
                                                                                </td>
                                                                                <td class="px-6 py-2 whitespace-nowrap text-right text-xs font-medium">
                                                                                    <div class="hs-tooltip inline-block">
                                                                                        <a href="{% url 'dashboard:job:details' past_due_job.pk %}"
                                                                                           class="hs-tooltip-toggle py-1 px-1 inline-flex justify-center items-center gap-2 rounded-full bg-blue-100 border border-transparent font-semibold text-blue-500 hover:text-white hover:bg-blue-500 focus:outline-none focus:ring-2 ring-offset-white focus:ring-blue-100 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                                                                                            <i class="fa-solid fa-eye w-3 h-3"></i>
                                                                                            <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                                                                                  role="tooltip">{% translate "View" %}</span>
                                                                                        </a>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                        {% endfor %}
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        {% else %}

                                                            {% include "bw_ui_components/global/empty_card.html" with label="past due jobs" %}

                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <a class="inline-flex items-center gap-2 mt-5 text-sm font-medium text-blue-500 hover:text-blue-700"
                                           href="{% url 'dashboard:job:list' %}">
                                            {% translate "All" %}
                                            <svg class="w-2.5 h-auto"
                                                 width="16"
                                                 height="16"
                                                 viewBox="0 0 16 16"
                                                 fill="none"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path d="M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]">
                                    <div class="p-4 md:p-5">
                                        <h3 class="text-xl font-bold text-gray-800 dark:text-white text-[24px]">
                                            {% translate "Jobs state" %}
                                        </h3>
                                        <div class="mt-5">
                                            <div class="flex flex-col">
                                                <div class="-m-1.5 h-80 {{ BW_PRELINE_ROUNDED_SCROLLBAR_CSS_CLASSES }}">
                                                    <div class="p-1.5 min-w-full inline-block align-middle">
                                                        {% if object.bookkeeper.get_proxy_model.get_stats_jobs %}
                                                            <div class="border rounded-lg shadow overflow-hidden dark:border-gray-700 dark:shadow-gray-900">
                                                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                                                        <tr class="divide-x divide-gray-200 dark:divide-gray-700">
                                                                            <th scope="col"
                                                                                class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">
                                                                                {% translate "Title" %}
                                                                            </th>
                                                                            <th scope="col"
                                                                                class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">
                                                                                {% translate "State" %}
                                                                            </th>
                                                                            <th scope="col"
                                                                                class="px-6 py-2 text-right text-xs font-medium text-gray-500 uppercase">
                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <!-- bg-red-100 text-gray-800 dark:text-gray-800 -->
                                                                    <!-- bg-yellow-100 text-gray-800 dark:text-gray-800 -->
                                                                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                                                        {% for state_job in object.bookkeeper.get_proxy_model.get_stats_jobs %}
                                                                            <tr class="bg-red-100 text-gray-800 dark:text-gray-800">
                                                                                <td class="px-6 py-1 whitespace-nowrap font-medium text-gray-800 dark:text-gray-200 text-xs">
                                                                                    <a href="{% url 'dashboard:job:details' state_job.pk %}"
                                                                                       class="{{ BW_PRELINE_ANCHOR_TAG_DEFAULT_COLOR }}">
                                                                                        {{ state_job.title|truncatechars:DEFAULT_TEMPLATE_TABLE_LIST_TRUNCATED_STRING }}
                                                                                    </a>
                                                                                </td>
                                                                                <td class="px-6 py-1 whitespace-nowrap text-xs text-gray-800 dark:text-gray-200">
                                                                                    {% bw_badge code=state_job.state text=state_job.get_state_display size="sm" is_very_small_font=True %}
                                                                                </td>
                                                                                <td class="px-6 py-1 whitespace-nowrap text-right text-xs font-medium">
                                                                                    <div class="hs-tooltip inline-block">
                                                                                        <a href="{% url 'dashboard:job:details' state_job.pk %}"
                                                                                           class="hs-tooltip-toggle py-1 px-1 inline-flex justify-center items-center gap-2 rounded-full bg-blue-100 border border-transparent font-semibold text-blue-500 hover:text-white hover:bg-blue-500 focus:outline-none focus:ring-2 ring-offset-white focus:ring-blue-100 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                                                                                            <i class="fa-solid fa-eye w-3 h-3"></i>
                                                                                            <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                                                                                  role="tooltip">{% translate "View" %}</span>
                                                                                        </a>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                        {% endfor %}
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        {% else %}

                                                            {% include "bw_ui_components/global/empty_card.html" with label="jobs" %}

                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <a class="mt-5 inline-flex items-center gap-2 text-sm font-medium text-blue-500 hover:text-blue-700"
                                           href="{% url 'dashboard:job:list' %}">
                                            {% translate "All" %}
                                            <svg class="w-2.5 h-auto"
                                                 width="16"
                                                 height="16"
                                                 viewBox="0 0 16 16"
                                                 fill="none"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path d="M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                    {# Start Tabs #}
                    <!-- <hr class="my-6" /> -->
                    <div class="grid grid-cols-12 gap-4 mt-4">
                        <div class="col-span-12">
                            <nav class="relative z-0 flex border rounded-xl overflow-hidden dark:border-gray-700"
                                 aria-label="Tabs"
                                 role="tablist">
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <button type="button"
                                            class="active hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                            id="bar-with-underline-item-1"
                                            data-hs-tab="#clients-tab"
                                            aria-controls="clients-tab"
                                            role="tab">{% translate "Clients" %}</button>
                                {% endif %}
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <button type="button"
                                            class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                            id="bar-with-underline-item-2"
                                            data-hs-tab="#jobs-tab"
                                            aria-controls="jobs-tab"
                                            role="tab">{% translate "Jobs" %}</button>
                                {% endif %}
                                <button type="button"
                                        class="active hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                        id="bar-with-underline-item-3"
                                        data-hs-tab="#assignments-tab"
                                        aria-controls="assignments-tab"
                                        role="tab">{% translate "Assignments" %}</button>
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <button type="button"
                                            class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                            id="bar-with-underline-item-4"
                                            data-hs-tab="#add-clients-tab"
                                            aria-controls="add-clients-tab"
                                            role="tab">{% translate "Add clients" %}</button>
                                {% endif %}
                                <button type="button"
                                        class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                        id="user-briefcase-tab-underline"
                                        data-hs-tab="#user-briefcase-tab"
                                        aria-controls="user-briefcase-tab"
                                        role="tab">{% translate "Briefcase" %}</button>
                            </nav>
                            <div class="mt-3">
                                {# Start Permissions Tab #}
                                <div id="user-briefcase-tab"
                                     role="tabpanel"
                                     class="hidden"
                                     aria-labelledby="user-briefcase-tab-underline">

                                    {% include "staff_briefcase/details_component.html" with object=object briefcase_document_form=briefcase_document_form briefcase_note_form=briefcase_note_form briefcase_account_form=briefcase_account_form %}

                                </div>
                                {# End Permissions Tab #}
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <div id="clients-tab"
                                         role="tabpanel"
                                         aria-labelledby="bar-with-underline-item-1">
                                        {% if object.get_staff_member_object.staff_object.get_proxy_model.clients.all %}
                                            <!-- Table Section -->
                                            <div>
                                                <!-- Table Section -->

                                                {% include "bw_components/client/table_list.html" with is_checkbox_enabled=False is_show_created_at=is_show_created_at header_title="Accounts" header_subtitle="Client accounts for all services" is_show_create_btn=False app_label="client" page_obj=object.get_staff_member_object.staff_object.get_proxy_model.clients.all pagination_list_url_name="dashboard:client:list" is_filters_enabled=False is_actions_menu_enabled=True actions_items="show,update,delete" actions_app_name="client" actions_base_url="dashboard:client" base_url_name="dashboard:client" filter_form=filter_form is_header_enabled=True is_footer_enabled=True object_list=object.get_staff_member_object.staff_object.get_proxy_model.clients.all %}

                                                <!-- End Table Section -->
                                            </div>
                                            <!-- End Table Section -->
                                        {% else %}

                                            {% include "bw_ui_components/global/empty_card.html" with label="clients" %}

                                        {% endif %}
                                    </div>
                                {% endif %}
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <div id="jobs-tab"
                                         class="hidden"
                                         role="tabpanel"
                                         aria-labelledby="bar-with-underline-item-2">
                                        {% if object.jobs.all %}

                                            {% include "bw_components/job/table_list.html" with is_checkbox_enabled=False is_show_create_btn=False is_show_created_at=IS_SHOW_CREATED_AT header_title="Jobs" header_subtitle="" app_label="job" pagination_list_url_name="dashboard:job:list" is_actions_menu_enabled=False actions_items="show,update,delete" actions_app_name="job" actions_base_url="dashboard:job" base_url_name="dashboard:job" page_obj=object.jobs.all is_show_client=False is_hide_manager=True %}

                                        {% else %}

                                            {% include "bw_ui_components/global/empty_card.html" with label="jobs" %}

                                        {% endif %}
                                    </div>
                                {% endif %}
                                <div id="assignments-tab"
                                     {% if object.user_type == CON_BOOKKEEPER %}class="hidden"{% endif %}
                                     role="tabpanel"
                                     aria-labelledby="bar-with-underline-item-3">
                                    {% comment  %}
                                        <div class="text-right">
                                        {% bw_create_btn_js_modal js_create_btn_css_id="createAssignmentBtn" modal_css_id="createAssignmentModal" app_name="special_assignment" %}
                                    </div>
                                    {% endcomment %}
                                    {% if object.get_staff_member_object.staff_object.special_assignments.all %}

                                        {% include "bw_components/special_assignment/mini_table_list.html" with is_checkbox_enabled=False is_show_created_at=IS_SHOW_CREATED_AT header_title="Special assignments" header_subtitle="Special assignments custom specific assignments to clients" app_label="special_assignment" pagination_list_url_name="dashboard:special_assignment:list" is_actions_menu_enabled=True actions_items="show,update,delete" actions_app_name="special_assignment" actions_base_url="dashboard:special_assignment" base_url_name="dashboard:special_assignment" page_obj=object.get_staff_member_object.staff_object.special_assignments.all %}

                                    {% else %}

                                        {% include "bw_ui_components/global/empty_card.html" with label="assignments" %}

                                    {% endif %}
                                    <!-- Table Section -->
                                    <!-- Card -->
                                    <!-- End Card -->
                                    <!-- End Table Section -->
                                </div>
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <div id="add-clients-tab"
                                         class="hidden"
                                         role="tabpanel"
                                         aria-labelledby="add-clients-tab">
                                        <!-- Card Section -->
                                        <!-- Card -->
                                        <div class="bg-white rounded-xl shadow p-4 sm:p-7 dark:bg-slate-900">
                                            <div class="mb-8">
                                                <h2 class="text-xl font-bold text-gray-800 dark:text-gray-200">{% translate "Assign" %}</h2>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    {% translate "Assign this bookkeeper to clients-tab" %}
                                                </p>
                                            </div>
                                            {% if clients %}
                                                <form id="assignedClientsForm"
                                                      method="post"
                                                      action="{% url 'dashboard:staff:assign-client' %}">
                                                    <fieldset form="assignedClientsForm">
                                                        {% csrf_token %}
                                                        <input type="hidden"
                                                               name="bookkeeper"
                                                               value="{{ object.get_staff_member_object.staff_object.pk }}" />
                                                        <!-- Grid -->
                                                        <div class="grid sm:grid-cols-3 gap-2">
                                                            {% for client in clients %}
                                                                <label for="client-{{ client.pk }}"
                                                                       class="flex p-3 block w-full bg-white border border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400">
                                                                    <div>
                                                                        <span class="block text-sm font-semibold text-gray-800 dark:text-gray-300">{{ client.name|safe }}</span>
                                                                        <span id="client-{{ client.pk }}-description"
                                                                              class="block text-sm text-gray-600 dark:text-gray-500">
                                                                            <p class="text-sm italic my-1">{{ client.industry|safe }}</p>
                                                                            <!-- <br /> -->
                                                                            {% if client.categories.all %}
                                                                                <div class="mt-3">
                                                                                    {% for category in client.categories.all %}
                                                                                        <span class="inline-flex items-center gap-1 py-0.5 px-2 rounded-full text-[11px] font-medium bg-gray-100 text-gray-600 mx-3 mb-2 -ml-2">{{ category.name }}</span>
                                                                                    {% endfor %}
                                                                                </div>
                                                                            {% endif %}
                                                                        </span>
                                                                    </div>
                                                                    <input type="checkbox"
                                                                           name="client"
                                                                           class="{{ BW_FULL_INPUT_CSS_CLASSES }} shrink-0 ml-auto mt-0.5 border-gray-200 rounded text-blue-600 pointer-events-none focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:checked:bg-blue-500 dark:checked:border-blue-500 dark:focus:ring-offset-gray-800"
                                                                           id="client-{{ client.pk }}"
                                                                           disabled
                                                                           {% if client in object.get_staff_member_object.staff_object.get_proxy_model.clients.all %}
                                                                               checked
                                                                           {% endif %}
                                                                           value="{{ client.pk }}" />
                                                                </label>
                                                            {% endfor %}
                                                        </div>
                                                        <!-- End Grid -->
                                                    </fieldset>
                                                    <div class="mt-5 flex justify-end gap-x-2">
                                                        <button type="submit"
                                                                form="assignedClientsForm"
                                                                disabled
                                                                id="assignClientBookkeeperBtn"
                                                                class="{{ BW_FULL_INPUT_CSS_CLASSES }} py-2 px-3 inline-flex justify-center items-center gap-2 rounded-md border border-transparent font-semibold bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                                                            {% translate "Assign" %}
                                                        </button>
                                                    </div>
                                                </form>
                                            {% else %}

                                                {% include "bw_ui_components/global/empty_card.html" with label="clients" %}

                                            {% endif %}
                                        </div>
                                        <!-- End Card -->
                                        <!-- End Card Section -->
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {# End Tabs #}
                </div>
            </div>
        </div>
    </div>
    {# Start Models #}
    {# Start create assignment modal #}
    {% bw_js_modal modal_css_id="createAssignmentModal" modal_size="sm" modal_title="Create new assignment" is_submit_btn_enabled=True is_form_modal=True form_object=special_assignment_form is_upload_form=True form_id="createAssignmentForm" form_submit_text="Create" action_url="dashboard:special_assignment:api:special-assignment-api-router-list" %}
    {# End create assignment modal #}
    {# Start Permissions and Details Modal #}
    <div id="permissions-details-modal"
         class="bw-js-modal hs-overlay hidden size-full fixed top-0 start-0 z-[80] overflow-x-hidden overflow-y-auto pointer-events-none">
        <div class="hs-overlay-open:mt-7 hs-overlay-open:opacity-100 hs-overlay-open:duration-500 mt-0 opacity-0 ease-out transition-all lg:max-w-6xl lg:w-full m-3 lg:mx-auto h-[calc(100%-3.5rem)]">
            <div class="max-h-full overflow-hidden flex flex-col bg-white border shadow-sm rounded-xl pointer-events-auto dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]">
                <div class="flex justify-between items-center py-3 px-4 border-b dark:border-gray-700">
                    <h3 class="font-bold text-gray-800 dark:text-white">
                        {% translate "Details & Permissions" %}
                    </h3>
                    <button type="button"
                            class="flex justify-center items-center size-7 text-sm font-semibold rounded-full border border-transparent text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:hover:bg-gray-700 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
                            data-hs-overlay="#permissions-details-modal">
                        <span class="sr-only">{% translate "Close" %}</span>
                        <svg class="flex-shrink-0 size-4"
                             xmlns="http://www.w3.org/2000/svg"
                             width="24"
                             height="24"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2"
                             stroke-linecap="round"
                             stroke-linejoin="round">
                            <path d="M18 6 6 18" />
                            <path d="m6 6 12 12" />
                        </svg>
                    </button>
                </div>
                <div class="p-4 overflow-y-auto">
                    <nav class="relative z-0 flex border rounded-xl overflow-hidden dark:border-gray-700"
                         aria-label="Tabs"
                         role="tablist" id="staffDetailsPermissionsTabs">
                        <button type="button"
                                class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-s-0 border-s border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 focus:outline-none focus:text-blue-600 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-400 active"
                                id="details-tab-item"
                                data-hs-tab="#details-tab"
                                aria-controls="details-tab"
                                role="tab">{% translate "Details" %}</button>
                        <button type="button"
                                class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-s-0 border-s border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 focus:outline-none focus:text-blue-600 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                id="permissions-tab-item"
                                data-hs-tab="#permissions-tab"
                                aria-controls="permissions-tab"
                                role="tab">{% translate "Permissions" %}</button>
                    </nav>
                    <div class="mt-3">
                        <div id="details-tab" role="tabpanel" aria-labelledby="details-tab-item">
                            <section id="staff-details" class="p-5">
                                <dl class="grid sm:grid-cols-3 gap-1 sm:gap-3">
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Full Name" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {{ object.fullname|safe }}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Email Address" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.email|check_var_none is True %}
                                            <address>
                                                <a class="text-blue-600 italic hober:itealic"
                                                   href="mailto:{{ object.email|safe }}">{{ object.email|safe }}</a>
                                            </address>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "User Type" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        <span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-sm font-medium border border-gray-200 bg-white text-gray-800 shadow-sm dark:bg-slate-900 dark:border-gray-700 dark:text-white">
                                            {{ object.get_user_type_display }}
                                        </span>
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "User Genre" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        <span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-sm font-medium border border-gray-200 bg-white text-gray-800 shadow-sm dark:bg-slate-900 dark:border-gray-700 dark:text-white">
                                            {{ object.get_user_genre_display }}
                                        </span>
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Status" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.status == CON_PENDING %}
                                            <span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium border border-yellow-200 shadow-sm  bg-yellow-100 text-yellow-800 dark:bg-yellow-800/30 dark:text-yellow-500">{{ object.get_status_display }}</span>
                                        {% elif object.status == CON_ENABLED %}
                                            <span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium border border-green-200 shadow-sm  bg-green-100 text-green-800 dark:bg-green-800/30 dark:text-green-500">{{ object.get_status_display }}</span>
                                        {% elif object.status == CON_CANCELED %}
                                            <span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium border border-red-200 shadow-sm  bg-red-100 text-red-800 dark:bg-red-800/30 dark:text-red-500">{{ object.get_status_display }}</span>
                                        {% elif object.status == CON_DISABLED %}
                                            <span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-gray-500 text-white">{{ object.get_status_display }}</span>
                                        {% elif object.status == CON_ARCHIVED %}
                                            <span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium border border-gray-200 bg-white text-gray-800 shadow-sm dark:bg-slate-900 dark:border-gray-700 dark:text-white">{{ object.get_status_display }}</span>
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Address" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.get_staff_member_object.staff_object.profile.address|check_var_none is True %}
                                            <address>
                                                {{ object.get_staff_member_object.staff_object.profile.address|safe }}
                                            </address>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold truncate dark:text-white">
                                        {% translate "Phone Number" %}
                                    </dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.get_staff_member_object.staff_object.profile.phone_number %}
                                            <address>
                                                {% if object.get_staff_member_object.staff_object.profile.phone_number %}
                                                    <a class="text-blue-600 italic"
                                                       href="tel:{{ object.get_staff_member_object.staff_object.profile.phone_number|safe }}">{{ object.get_staff_member_object.staff_object.profile.phone_number|safe }}</a>
                                                {% else %}
                                                    <a class="text-blue-600 italic" href="javascript:;">---</a>
                                                {% endif %}
                                            </address>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold truncate dark:text-white">{% translate "BIO" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.get_staff_member_object.staff_object.profile.bio|check_var_none is True %}
                                            <p>{{ object.get_staff_member_object.staff_object.profile.bio|safe }}</p>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Facebook" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.get_staff_member_object.staff_object.profile.facebook|check_var_none is True %}
                                            <a class="text-blue-600 italic"
                                               href="mailto:{{ object.get_staff_member_object.staff_object.profile.facebook|safe }}">{{ object.get_staff_member_object.staff_object.profile.facebook|safe }}</a>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Twitter" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.get_staff_member_object.staff_object.profile.twitter|check_var_none is True %}
                                            <a class="text-blue-600 italic"
                                               href="mailto:{{ object.get_staff_member_object.staff_object.profile.twitter|safe }}">{{ object.get_staff_member_object.staff_object.profile.twitter|safe }}</a>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Instagram" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.get_staff_member_object.staff_object.profile.instagram|check_var_none is True %}
                                            <a class="text-blue-600 italic"
                                               href="mailto:{{ object.get_staff_member_object.staff_object.profile.instagram|safe }}">{{ object.get_staff_member_object.staff_object.profile.instagram|safe }}</a>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Linkedin" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.get_staff_member_object.staff_object.profile.linkedin|check_var_none is True %}
                                            <a class="text-blue-600 italic"
                                               href="mailto:{{ object.get_staff_member_object.staff_object.profile.linkedin|safe }}">{{ object.get_staff_member_object.staff_object.profile.linkedin|safe }}</a>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Github" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.get_staff_member_object.staff_object.profile.github|check_var_none is True %}
                                            <a class="text-blue-600 italic"
                                               href="mailto:{{ object.get_staff_member_object.staff_object.profile.github|safe }}">{{ object.get_staff_member_object.staff_object.profile.github|safe }}</a>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Created" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        <p>{{ object.created_at }}</p>
                                    </dd>
                                    <dt class="sm:col-span-1 font-semibold dark:text-white">{% translate "Last Login" %}</dt>
                                    <dd class="sm:col-span-2 mb-3 sm:mb-0 dark:text-white">
                                        {% if object.last_login|check_var_none is True %}
                                            <p>{{ object.last_login }}</p>
                                        {% else %}
                                            ---
                                        {% endif %}
                                    </dd>
                                </dl>
                            </section>
                        </div>
                        <div id="permissions-tab"
                             class="hidden"
                             role="tabpanel"
                             aria-labelledby="permissions-tab-item">
                            <form method="post" id="permissionsUpdateMiniForm">
                                <fieldset>
                                    {% csrf_token %}
                                    <input type="hidden" name="_method" value="post" />
                                    <input type="hidden" name="user" value="{{ object.pk }}" />
                                    <legend class="mb-2">
                                        <h4 class="text-xl dark:text-white">{% translate "Permissions" %}</h4>
                                    </legend>
                                    <div class="grid sm:grid-cols-4 gap-2">
                                        {% for permission_field in permissions_form %}
                                            {% if permission_field.field.widget|bw_get_form_field_type == "CheckboxSelectMultiple" %}
                                                {% for choice in permission_field %}
                                                    <label for="{{ choice.data.attrs.id }}"
                                                           class="flex p-3 block w-full bg-white border border-gray-200 rounded-md text-xs focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400">
                                                        <div>
                                                            <span class="block text-sm font-semibold text-gray-800 dark:text-gray-300">{{ choice.choice_label|safe|grab_last_permission_label }}</span>
                                                            <span id="{{ choice.data.attrs.id }}-description"
                                                                  class="block text-sm text-gray-600 dark:text-gray-500">
                                                                <p class="text-xs italic my-1">{{ choice.choice_label|safe }}</p>
                                                            </span>
                                                        </div>
                                                        <input type="checkbox"
                                                               {% if choice.data.selected is True %}checked{% endif %}
                                                               value="{{ choice.data.value }}"
                                                               name="{{ permission_field.name }}"
                                                               id="{{ choice.data.attrs.id }}"
                                                               class="{{ BW_FULL_INPUT_CSS_CLASSES }} shrink-0 ml-auto mt-0.5 border-gray-200 rounded text-blue-600 pointer-events-none focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:checked:bg-blue-500 dark:checked:border-blue-500 dark:focus:ring-offset-gray-800" />
                                                    </label>
                                                {% endfor %}
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end items-center gap-x-2 py-3 px-4 border-t dark:border-gray-700">
                    <button type="button"
                            class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
                            data-hs-overlay="#permissions-details-modal">
                        {% translate "Close" %}
                    </button>
                    <button type="submit"
                            form="permissionsUpdateMiniForm"
                            class="hidden py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
                            id="updatePermissionsStaffDetailsBtn">
                        {% translate "Update" %}
                    </button>
                </div>
            </div>
        </div>
    </div>
    {# End Permissions and Details Modal #}
    {# End Models #}
{% endblock dashboard_content_block %}
