{% extends "core/layouts/dashboard_content_base.html" %}

{% load i18n %}

{% load static %}
{% load bw_guardian_tags %}

{% block dashboard_content_block %}
    <div>
        <div class="grid grid-flow-row-dense lg:grid-cols-4 md:grid-cols-1 grid-rows-1 gap-2">
            {# Start Left Aside #}
            <div class="lg:col-span-1 sm:col-span-2">
                <!-- Start Col -->
                <div class="relative overflow-hidden flex flex-col rounded-xl p-4 md:p-6 bg-white border border-gray-200 dark:bg-slate-900 dark:border-gray-700">
                    {# Start Ribbon #}
                    {% if object.status == CON_ARCHIVED %}
                        <div class="absolute right-0 top-0 h-10 w-10">
                            <div class="absolute transform rotate-45 bg-yellow-400 text-center text-white font-semibold py-1 right-[-40px] top-[20px] w-[150px]">
                                {% translate "Archived" %}
                            </div>
                        </div>
                    {% endif %}
                    {# End Ribbon #}
                    <div class="flex gap-x-2">
                        <img class="rounded-full w-20 h-20"
                             src="{% if object.get_staff_member_object.staff_object.profile.profile_picture %} {{ object.get_staff_member_object.staff_object.profile.profile_picture.url }} {% else %} {% static 'img/default_staff.png' %} {% endif %}"
                             alt="{{ object.fullname }}" />
                        <div class="grow">
                            <h3 class="font-medium text-gray-800 dark:text-gray-200">
                                {{ object.fullname|safe }}
                                {# Start Is active and is has manager permissions #}
                                <div class="flex">
                                    <div class="hs-tooltip inline-block ml-2 mr-1">
                                        <button type="button" class="hs-tooltip-toggle">
                                            <!-- Icon -->
                                            <span class="inline-flex justify-center items-center w-[18px] h-[18px] rounded-full bg-green-500 text-white">
                                                <i class="fa-solid fa-check h-3 w-3"></i>
                                            </span>
                                            <!-- End Icon -->
                                            <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                                  role="tooltip">{% translate "Active" %}</span>
                                        </button>
                                    </div>
                                    {% if object.user_type == CON_ASSISTANT or object.user_type == CON_MANAGER %}
                                        {% if object.is_superuser is True or object|bw_has_perm:'assistant.assistant_has_full_manager_permissions' is True %}
                                            <div class="hs-tooltip inline-block mx-1">
                                                <button type="button" class="hs-tooltip-toggle">
                                                    <!-- Icon -->
                                                    <span class="inline-flex justify-center items-center w-[22px] h-[22px] rounded-full bg-blue-100 text-blue-600">
                                                        <i class="fa-solid fa-lock h-3 w-3"></i>
                                                    </span>
                                                    <!-- End Icon -->
                                                    <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                                          role="tooltip">{% translate "Staff member has full manager permissions" %}</span>
                                                </button>
                                            </div>
                                        {% endif %}
                                    {% endif %}
                                </div>
                                {# End Is active and is has manager permissions #}
                            </h3>
                            {# Start Assistant Type #}
                            {% if object.user_type == CON_ASSISTANT %}
                                <p class="text-xs uppercase text-gray-500">
                                    <div class="hs-tooltip inline-block">
                                        <div class="hs-tooltip-toggle text-xs uppercase text-gray-500">
                                            {{ object.assistant.get_assistant_type_display }}
                                            <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                                  role="tooltip">{% translate "Assistant type" %}</span>
                                        </div>
                                    </div>
                                </p>
                            {% endif %}
                            {# End Assistant Type #}
                            {# Start User Type #}
                            <p class="text-xs uppercase text-gray-500 mt-1">
                                <div class="hs-tooltip inline-block [--placement:right]">
                                    <div class="hs-tooltip-toggle text-xs uppercase text-gray-500">
                                        <span class="inline-flex items-center gap-1.5 py-1.5 px-2 rounded-full text-xs font-bold bg-blue-100 text-blue-800">
                                            <span class="w-1.5 h-1.5 inline-block bg-indigo-400 rounded-full"></span>
                                            {{ object.get_user_type_display }}
                                        </span>
                                        <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                              role="tooltip">{% translate "Staff type" %}</span>
                                    </div>
                                </div>
                            </p>
                            {# End User Type #}
                        </div>
                    </div>
                    <div class="flex items-center mt-4 gap-x-1">
                        <div>
                            <!-- Icon -->
                            <span class="inline-flex justify-center items-center w-[22px] h-[22px] rounded-full bg-gray-50 text-gray-800 dark:bg-gray-700 dark:text-gray-400">
                                <i class="fa-solid fa-location-dot h-3 w-3"></i>
                            </span>
                            <!-- End Icon -->
                        </div>
                        <div>
                            <p>
                                <address class="text-gray-600 text-[14px] italic">
                                    {{ object.get_staff_member_object.staff_object.profile.address|safe }}
                                </address>
                            </p>
                        </div>
                    </div>
                    <div class="flex items-center mt-1 gap-x-1">
                        <div>
                            <!-- Icon -->
                            <span class="inline-flex justify-center items-center w-[22px] h-[22px] rounded-full bg-gray-50 text-gray-800 dark:bg-gray-700 dark:text-gray-400">
                                <i class="fa-solid fa-at h-3 w-3"></i>
                            </span>
                            <!-- End Icon -->
                        </div>
                        <div>
                            <p class="text-blue-600 text-[14px] italic">
                                <a href="mailto:{{ object.email }}">{{ object.email }}</a>
                            </p>
                        </div>
                    </div>
                    <div class="flex items-center mt-1 gap-x-1">
                        <div>
                            <!-- Icon -->
                            <span class="inline-flex justify-center items-center w-[22px] h-[22px] rounded-full bg-gray-50 text-gray-800 dark:bg-gray-700 dark:text-gray-400">
                                <i class="fa-solid fa-phone h-3 w-3"></i>
                            </span>
                            <!-- End Icon -->
                        </div>
                        <div>
                            <p class="text-blue-600 text-[14px] italic">
                                <a href="">{{ object.get_staff_member_object.staff_object.profile.phone_number }}</a>
                            </p>
                        </div>
                    </div>
                    <div class="flex items-center mt-1 gap-x-1">
                        <div>
                            <div class="hs-tooltip inline-block">
                                <p class="hs-tooltip-toggle">
                                    <!-- Icon -->
                                    <span class="inline-flex justify-center items-center w-[22px] h-[22px] rounded-full bg-gray-50 text-gray-800 dark:bg-gray-700 dark:text-gray-400">
                                        <i class="fa-solid fa-calendar-days h-3 w-3"></i>
                                    </span>
                                    <!-- End Icon -->
                                    <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                          role="tooltip">{% translate "Date joined" %}</span>
                                </p>
                            </div>
                        </div>
                        <div>
                            <p class="text-gray-600 text-[14px] italic">{{ object.created_at|date }}</p>
                        </div>
                    </div>
                    <div class="flex items-center mt-1 gap-x-1">
                        <div>
                            <div class="hs-tooltip inline-block">
                                <p class="hs-tooltip-toggle">
                                    <!-- Icon -->
                                    <span class="inline-flex justify-center items-center w-[22px] h-[22px] rounded-full bg-gray-50 text-gray-800 dark:bg-gray-700 dark:text-gray-400">
                                        <i class="fa-solid fa-right-to-bracket h-3 w-3"></i>
                                    </span>
                                    <!-- End Icon -->
                                    <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                          role="tooltip">{% translate "Last login" %}</span>
                                </p>
                            </div>
                        </div>
                        <div>
                            <p class="text-gray-600 text-[14px] italic">{{ object.last_login }}</p>
                        </div>
                    </div>
                    <hr class="my-3" />
                    <div class="flex items-center mt-1">
                        <a href="{% get_staff_member_update_url user=object %}"
                           class="w-full first-letter:m-1 ml-0 py-3 px-4 inline-flex justify-center items-center gap-2 bg-blue-100 border border-transparent font-semibold text-blue-500 hover:text-white hover:bg-blue-500 focus:outline-none focus:ring-2 ring-offset-white focus:ring-blue-100 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800 mb-1 rounded-full">
                            {% translate "Edit " %} {{ object.user_type }}
                            <i class="fa-solid fa-pencil w-3.5 h-3.5"></i>
                        </a>
                        <a href="#"
                           class="m-1 ml-0 py-3 px-4 inline-flex justify-center items-center gap-2 rounded-full w-full bg-yellow-100 border border-transparent font-semibold text-yellow-500 hover:text-white hover:bg-yellow-500 focus:outline-none focus:ring-2 ring-offset-white focus:ring-yellow-100 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                            {% translate "Edit user" %}
                            <i class="fa-solid fa-user-pen w-3.5 h-3.5"></i>
                        </a>
                    </div>
                </div>
                <!-- End Col -->
                <div class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7] mt-1">
                    <div class="h-80 overflow-y-auto p-4 md:p-5">
                        <h3 class="text-xl font-bold text-gray-800 dark:text-white text-[22px]">
                            {% translate "Biography" %}
                        </h3>
                        <article class="mt-4">
                            <!-- Social Brands -->
                            <div class="space-x-1">
                                {% if object.get_staff_member_object.staff_object.profile.linkedin %}
                                    <a class="inline-flex justify-center items-center text-gray-500 border border-gray-200 w-8 h-8 rounded-md hover:text-gray-800 hover:shadow-sm dark:hover:text-gray-200 dark:border-gray-700 dark:hover:shadow-slate-700/[.7] linkedin-social-icon-link"
                                       href="{{ object.get_staff_member_object.staff_object.profile.linkedin }}"
                                       target="_blank">
                                        <i class="{{ object.get_staff_member_object.staff_object.profile.fa_linkedin_icon }} w-3.5 h-3.5"></i>
                                    </a>
                                {% endif %}
                                {% if object.get_staff_member_object.staff_object.profile.instagram %}
                                    <a class="inline-flex justify-center items-center text-gray-500 border border-gray-200 w-8 h-8 rounded-md hover:text-gray-800 hover:shadow-sm dark:hover:text-gray-200 dark:border-gray-700 dark:hover:shadow-slate-700/[.7] instagram-social-icon-link"
                                       href="{{ object.get_staff_member_object.staff_object.profile.instagram }}"
                                       target="_blank">
                                        <i class="{{ object.get_staff_member_object.staff_object.profile.fa_instagram_icon }} w-3.5 h-3.5"></i>
                                    </a>
                                {% endif %}
                                {% if object.get_staff_member_object.staff_object.profile.github %}
                                    <a class="inline-flex justify-center items-center text-gray-500 border border-gray-200 w-8 h-8 rounded-md hover:text-gray-800 hover:shadow-sm dark:hover:text-gray-200 dark:border-gray-700 dark:hover:shadow-slate-700/[.7] github-social-icon-link"
                                       href="{{ object.get_staff_member_object.staff_object.profile.github }}"
                                       target="_blank">
                                        <i class="{{ object.get_staff_member_object.staff_object.profile.fa_github_icon }} w-3.5 h-3.5"></i>
                                    </a>
                                {% endif %}
                                {% if object.get_staff_member_object.staff_object.profile.twitter %}
                                    <a class="inline-flex justify-center items-center text-gray-500 border border-gray-200 w-8 h-8 rounded-md hover:text-gray-800 hover:shadow-sm dark:hover:text-gray-200 dark:border-gray-700 dark:hover:shadow-slate-700/[.7] twitter-social-icon-link"
                                       href="{{ object.get_staff_member_object.staff_object.profile.twitter }}"
                                       target="_blank">
                                        <i class="{{ object.get_staff_member_object.staff_object.profile.fa_twitter_icon }} w-3.5 h-3.5"></i>
                                    </a>
                                {% endif %}
                                {% if object.get_staff_member_object.staff_object.profile.facebook %}
                                    <a class="inline-flex justify-center items-center text-gray-500 border border-gray-200 w-8 h-8 rounded-md hover:text-gray-800 hover:shadow-sm dark:hover:text-gray-200 dark:border-gray-700 dark:hover:shadow-slate-700/[.7] facebook-social-icon-link"
                                       href="{{ object.get_staff_member_object.staff_object.profile.facebook }}"
                                       target="_blank">
                                        <i class="{{ object.get_staff_member_object.staff_object.profile.fa_facebook_icon }} w-3.5 h-3.5"></i>
                                    </a>
                                {% endif %}
                            </div>
                            <!-- End Social Brands -->
                            <p class="mt-3 text-gray-500 dark:text-gray-400">
                                {{ object.get_staff_member_object.staff_object.profile.bio|safe }}
                            </p>
                        </article>
                    </div>
                </div>
                <div class="flex flex-col bg-white border shadow-sm rounded-xl p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7] dark:text-gray-400 mt-1">
                    {# Start Grid #}
                    <div class="grid
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    sm:grid-cols-2 lg:grid-cols-2
                                {% else %}
                                    sm:grid-cols-1 lg:grid-cols-1
                                {% endif %}
                                gap-1 sm:gap-1">
                        {% if object.user_type == CON_BOOKKEEPER %}
                            <!-- Card -->
                            <div class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-800">
                                <div class="py-4 md:py-5 px-3">
                                    <div class="flex items-center gap-x-2">
                                        <p class="text-xs uppercase tracking-wide text-gray-500">{% translate "Clients" %}</p>
                                    </div>
                                    <div class="mt-1 flex items-center">
                                        <h3 class="text-lg sm:text-lg font-medium text-gray-800 dark:text-gray-200">
                                            {{ object.get_staff_member_object.staff_object.get_proxy_model.clients.count }}
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <!-- End Card -->
                        {% endif %}
                        <!-- Card -->
                        <div class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-800">
                            <div class="py-4 md:py-5 px-3">
                                <div class="flex items-center gap-x-2">
                                    <p class="text-xs uppercase tracking-wide text-gray-500">{% translate "Jobs" %}</p>
                                </div>
                                <div class="mt-1 flex items-center">
                                    <h3 class="text-lg sm:text-lg font-medium text-gray-800 dark:text-gray-200">
                                        {{ object.jobs.count }}
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <!-- End Card -->
                    </div>
                    {# End Grid #}
                    {# Start Grid #}
                    <div class="grid
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    sm:grid-cols-2 lg:grid-cols-2
                                {% else %}
                                    sm:grid-cols-1 lg:grid-cols-1
                                {% endif %}
                                gap-1 sm:gap-1 mt-1">
                        {% if object.user_type == CON_BOOKKEEPER %}
                            <!-- Card -->
                            <div class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-800">
                                <div class="py-4 md:py-5 px-3">
                                    <div class="flex items-center gap-x-2">
                                        <p class="text-xs uppercase tracking-wide text-gray-500">{% translate "Tasks" %}</p>
                                    </div>
                                    <div class="mt-1 flex items-center">
                                        <h3 class="text-lg sm:text-lg font-medium text-gray-800 dark:text-gray-200">72,540</h3>
                                    </div>
                                </div>
                            </div>
                            <!-- End Card -->
                        {% endif %}
                        <!-- Card -->
                        <div class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-800">
                            <div class="py-4 md:py-5 px-3">
                                <div class="flex items-center gap-x-2">
                                    <p class="text-xs uppercase tracking-wide text-gray-500">{% translate "Assignments" %}</p>
                                </div>
                                <div class="mt-1 flex items-center">
                                    <h3 class="text-lg sm:text-lg font-medium text-gray-800 dark:text-gray-200">
                                        {{ object.get_staff_member_object.staff_object.special_assignments.count }}
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <!-- End Card -->
                    </div>
                    {# End Grid #}
                </div>
            </div>
            {# End Left Aside #}
            <div class="col-span-3">
                <div class="flex flex-col bg-white border shadow-sm rounded-xl p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7] dark:text-gray-400">
                    <div class="grid grid-flow-row-dense lg:grid-cols-2 md:grid-cols-1 grid-rows-1 gap-2">
                        {% if object.user_type == CON_BOOKKEEPER %}
                            <div>
                                <div class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]">
                                    <div class="p-4 md:p-5">
                                        <h3 class="text-xl font-bold text-gray-800 dark:text-white text-[24px]">
                                            {% translate "Past due jobs" %}
                                        </h3>
                                        <div class="mt-5">
                                            <div class="flex flex-col">
                                                <div class="-m-1.5 overflow-x-auto">
                                                    <div class="p-1.5 min-w-full inline-block align-middle">
                                                        {% if object.bookkeeper.get_proxy_model.get_past_due_jobs %}
                                                            <div class="border rounded-lg shadow overflow-hidden dark:border-gray-700 dark:shadow-gray-900">
                                                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                                                        <tr class="divide-x divide-gray-200 dark:divide-gray-700">
                                                                            <th scope="col"
                                                                                width="90%"
                                                                                class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">
                                                                                {% translate "Title" %}
                                                                            </th>
                                                                            <th scope="col"
                                                                                class="px-6 py-2 text-right text-xs font-medium text-gray-500 uppercase">
                                                                                {% translate "Action" %}
                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                                                        {% for past_due_job in object.bookkeeper.get_proxy_model.get_past_due_jobs %}
                                                                            <tr>
                                                                                <td class="px-6 py-2 whitespace-nowrap font-medium text-gray-800 dark:text-gray-200 text-xs">
                                                                                    <a href="{% url 'dashboard:job:details' past_due_job.pk %}"
                                                                                       class="{{ BW_PRELINE_ANCHOR_TAG_DEFAULT_COLOR }}">
                                                                                        {{ past_due_job.title|truncatechars:DEFAULT_TEMPLATE_TABLE_LIST_TRUNCATED_STRING }}
                                                                                    </a>
                                                                                </td>
                                                                                <td class="px-6 py-2 whitespace-nowrap text-right text-xs font-medium">
                                                                                    <div class="hs-tooltip inline-block">
                                                                                        <a href="{% url 'dashboard:job:details' past_due_job.pk %}"
                                                                                           class="hs-tooltip-toggle py-1 px-1 inline-flex justify-center items-center gap-2 rounded-full bg-blue-100 border border-transparent font-semibold text-blue-500 hover:text-white hover:bg-blue-500 focus:outline-none focus:ring-2 ring-offset-white focus:ring-blue-100 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                                                                                            <i class="fa-solid fa-eye w-3 h-3"></i>
                                                                                            <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                                                                                  role="tooltip">{% translate "View" %}</span>
                                                                                        </a>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                        {% endfor %}
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        {% else %}

                                                            {% include "bw_ui_components/global/empty_card.html" with label="past due jobs" %}

                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <a class="inline-flex items-center gap-2 mt-5 text-sm font-medium text-blue-500 hover:text-blue-700"
                                           href="{% url 'dashboard:job:list' %}">
                                            {% translate "All" %}
                                            <svg class="w-2.5 h-auto"
                                                 width="16"
                                                 height="16"
                                                 viewBox="0 0 16 16"
                                                 fill="none"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path d="M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]">
                                    <div class="p-4 md:p-5">
                                        <h3 class="text-xl font-bold text-gray-800 dark:text-white text-[24px]">
                                            {% translate "Jobs state" %}
                                        </h3>
                                        <div class="mt-5">
                                            <div class="flex flex-col">
                                                <div class="-m-1.5 overflow-x-auto">
                                                    <div class="p-1.5 min-w-full inline-block align-middle">
                                                        {% if object.bookkeeper.get_proxy_model.get_stats_jobs %}
                                                            <div class="border rounded-lg shadow overflow-hidden dark:border-gray-700 dark:shadow-gray-900">
                                                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                                                        <tr class="divide-x divide-gray-200 dark:divide-gray-700">
                                                                            <th scope="col"
                                                                                class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">
                                                                                {% translate "Title" %}
                                                                            </th>
                                                                            <th scope="col"
                                                                                class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">
                                                                                {% translate "State" %}
                                                                            </th>
                                                                            <th scope="col"
                                                                                class="px-6 py-2 text-right text-xs font-medium text-gray-500 uppercase">
                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <!-- bg-red-100 text-gray-800 dark:text-gray-800 -->
                                                                    <!-- bg-yellow-100 text-gray-800 dark:text-gray-800 -->
                                                                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                                                        {% for state_job in object.bookkeeper.get_proxy_model.get_stats_jobs %}
                                                                            <tr class="bg-red-100 text-gray-800 dark:text-gray-800">
                                                                                <td class="px-6 py-1 whitespace-nowrap font-medium text-gray-800 dark:text-gray-200 text-xs">
                                                                                    <a href="{% url 'dashboard:job:details' state_job.pk %}"
                                                                                       class="{{ BW_PRELINE_ANCHOR_TAG_DEFAULT_COLOR }}">
                                                                                        {{ state_job.title|truncatechars:DEFAULT_TEMPLATE_TABLE_LIST_TRUNCATED_STRING }}
                                                                                    </a>
                                                                                </td>
                                                                                <td class="px-6 py-1 whitespace-nowrap text-xs text-gray-800 dark:text-gray-200">
                                                                                    {% bw_badge code=state_job.state text=state_job.get_state_display size="sm" is_very_small_font=True %}
                                                                                </td>
                                                                                <td class="px-6 py-1 whitespace-nowrap text-right text-xs font-medium">
                                                                                    <div class="hs-tooltip inline-block">
                                                                                        <a href="{% url 'dashboard:job:details' state_job.pk %}"
                                                                                           class="hs-tooltip-toggle py-1 px-1 inline-flex justify-center items-center gap-2 rounded-full bg-blue-100 border border-transparent font-semibold text-blue-500 hover:text-white hover:bg-blue-500 focus:outline-none focus:ring-2 ring-offset-white focus:ring-blue-100 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                                                                                            <i class="fa-solid fa-eye w-3 h-3"></i>
                                                                                            <span class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 transition-opacity inline-block absolute invisible z-10 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-md shadow-sm dark:bg-slate-700"
                                                                                                  role="tooltip">{% translate "View" %}</span>
                                                                                        </a>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                        {% endfor %}
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        {% else %}

                                                            {% include "bw_ui_components/global/empty_card.html" with label="jobs" %}

                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <a class="mt-5 inline-flex items-center gap-2 text-sm font-medium text-blue-500 hover:text-blue-700"
                                           href="{% url 'dashboard:job:list' %}">
                                            {% translate "All" %}
                                            <svg class="w-2.5 h-auto"
                                                 width="16"
                                                 height="16"
                                                 viewBox="0 0 16 16"
                                                 fill="none"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path d="M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                    {# Start Tabs #}
                    <!-- <hr class="my-6" /> -->
                    <div class="grid grid-cols-12 gap-4 mt-4">
                        <div class="col-span-12">
                            <nav class="relative z-0 flex border rounded-xl overflow-hidden dark:border-gray-700"
                                 aria-label="Tabs"
                                 role="tablist">
                                <button type="button"
                                        class="active hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                        id="user-details-tab-underline"
                                        data-hs-tab="#user-details-tab"
                                        aria-controls="user-details-tab"
                                        role="tab">{% translate "Details" %}</button>
                                <button type="button"
                                        class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                        id="user-permissions-tab-underline"
                                        data-hs-tab="#user-permissions-tab"
                                        aria-controls="user-permissions-tab"
                                        role="tab">{% translate "Permissions" %}</button>
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <button type="button"
                                            class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                            id="bar-with-underline-item-1"
                                            data-hs-tab="#clients-tab"
                                            aria-controls="clients-tab"
                                            role="tab">{% translate "Clients" %}</button>
                                {% endif %}
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <button type="button"
                                            class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                            id="bar-with-underline-item-2"
                                            data-hs-tab="#jobs-tab"
                                            aria-controls="jobs-tab"
                                            role="tab">{% translate "Jobs" %}</button>
                                {% endif %}
                                <button type="button"
                                        class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                        id="bar-with-underline-item-3"
                                        data-hs-tab="#assignments-tab"
                                        aria-controls="assignments-tab"
                                        role="tab">{% translate "Assignments" %}</button>
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <button type="button"
                                            class="hs-tab-active:border-b-blue-600 hs-tab-active:text-gray-900 dark:hs-tab-active:text-white dark:hs-tab-active:border-b-blue-600 relative min-w-0 flex-1 bg-white first:border-l-0 border-l border-b-2 py-4 px-4 text-gray-500 hover:text-gray-700 text-sm font-medium text-center overflow-hidden hover:bg-gray-50 focus:z-10 dark:bg-gray-800 dark:border-l-gray-700 dark:border-b-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-400"
                                            id="bar-with-underline-item-4"
                                            data-hs-tab="#add-clients-tab"
                                            aria-controls="add-clients-tab"
                                            role="tab">{% translate "Add clients" %}</button>
                                {% endif %}
                            </nav>
                            <div class="mt-3">
                                {# Start Details Tab #}
                                <div id="user-details-tab"
                                     role="tabpanel"
                                     aria-labelledby="user-details-tab-underline">
                                    <section id="formWrapper">
                                        {% component "bw_form" form=staff_form perms=perms form_id="staffUpdateMiniForm" submit_btn_text="Update" form_title="Update staff - "|add:object.fullname form_subtitle="Update staff details" is_upload_form=True hide_back_btn=True hide_submit_btn=True %}
                                    </section>
                                </div>
                                {# End Details Tab #}
                                {# Start Permissions Tab #}
                                <div id="user-permissions-tab"
                                     role="tabpanel"
                                     class="hidden"
                                     aria-labelledby="user-permissions-tab-underline">
                                    <section id="permissionsFormWrapper">
                                        {% component "bw_form" form=permissions_form perms=perms form_id="permissionsUpdateMiniForm" submit_btn_text="Update" form_title="Update permissions - "|add:object.fullname form_subtitle="Update permissions" is_upload_form=True hide_back_btn=True hide_submit_btn=True %}
                                    </section>
                                </div>
                                {# End Permissions Tab #}
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <div id="clients-tab"
                                         role="tabpanel"
                                         class="hidden"
                                         aria-labelledby="bar-with-underline-item-1">
                                        {% if object.get_staff_member_object.staff_object.get_proxy_model.clients.all %}
                                            <!-- Table Section -->
                                            <div>
                                                <!-- Table Section -->

                                                {% include "bw_components/client/table_list.html" with is_checkbox_enabled=False is_show_created_at=is_show_created_at header_title="Accounts" header_subtitle="Client accounts for all services" is_show_create_btn=False app_label="client" page_obj=object.get_staff_member_object.staff_object.get_proxy_model.clients.all pagination_list_url_name="dashboard:client:list" is_filters_enabled=False is_actions_menu_enabled=True actions_items="show,update,delete" actions_app_name="client" actions_base_url="dashboard:client" base_url_name="dashboard:client" filter_form=filter_form is_header_enabled=True is_footer_enabled=True object_list=object.get_staff_member_object.staff_object.get_proxy_model.clients.all %}

                                                <!-- End Table Section -->
                                            </div>
                                            <!-- End Table Section -->
                                        {% else %}

                                            {% include "bw_ui_components/global/empty_card.html" with label="clients" %}

                                        {% endif %}
                                    </div>
                                {% endif %}
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <div id="jobs-tab"
                                         class="hidden"
                                         role="tabpanel"
                                         aria-labelledby="bar-with-underline-item-2">
                                        {% if object.jobs.all %}

                                            {% include "bw_components/job/table_list.html" with is_checkbox_enabled=False is_show_create_btn=False is_show_created_at=IS_SHOW_CREATED_AT header_title="Jobs" header_subtitle="" app_label="job" pagination_list_url_name="dashboard:job:list" is_actions_menu_enabled=False actions_items="show,update,delete" actions_app_name="job" actions_base_url="dashboard:job" base_url_name="dashboard:job" object_list=object.jobs.all is_show_client=False %}

                                        {% else %}

                                            {% include "bw_ui_components/global/empty_card.html" with label="jobs" %}

                                        {% endif %}
                                    </div>
                                {% endif %}
                                <div id="assignments-tab"
                                     class="hidden"
                                     role="tabpanel"
                                     aria-labelledby="bar-with-underline-item-3">
                                    <div class="text-right">
                                        {% bw_create_btn_js_modal js_create_btn_css_id="createAssignmentBtn" modal_css_id="createAssignmentModal" app_name="special_assignment" %}
                                    </div>
                                    {% if object.get_staff_member_object.staff_object.special_assignments.all %}

                                        {% include "bw_components/special_assignment/mini_table_list.html" with is_checkbox_enabled=False is_show_created_at=IS_SHOW_CREATED_AT header_title="Special assignments" header_subtitle="Special assignments custom specific assignments to clients" app_label="special_assignment" pagination_list_url_name="dashboard:special_assignment:list" is_actions_menu_enabled=True actions_items="show,update,delete" actions_app_name="special_assignment" actions_base_url="dashboard:special_assignment" base_url_name="dashboard:special_assignment" page_obj=object.get_staff_member_object.staff_object.special_assignments.all %}

                                    {% else %}

                                        {% include "bw_ui_components/global/empty_card.html" with label="assignments" %}

                                    {% endif %}
                                    <!-- Table Section -->
                                    <!-- Card -->
                                    <!-- End Card -->
                                    <!-- End Table Section -->
                                </div>
                                {% if object.user_type == CON_BOOKKEEPER %}
                                    <div id="add-clients-tab"
                                         class="hidden"
                                         role="tabpanel"
                                         aria-labelledby="add-clients-tab">
                                        <!-- Card Section -->
                                        <!-- Card -->
                                        <div class="bg-white rounded-xl shadow p-4 sm:p-7 dark:bg-slate-900">
                                            <div class="mb-8">
                                                <h2 class="text-xl font-bold text-gray-800 dark:text-gray-200">Assign</h2>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    {% translate "Assign this bookkeeper to clients-tab" %}
                                                </p>
                                            </div>
                                            {% if clients %}
                                                <form id="assignedClientsForm" method="post" action="">
                                                    <fieldset form="assignedClientsForm">
                                                        {% csrf_token %}
                                                        <!-- Grid -->
                                                        <div class="grid space-y-3">
                                                            {% for client in clients %}
                                                                <div class="relative flex items-start">
                                                                    <div class="flex items-center h-5 mt-1">
                                                                        <input id="client-{{ client.pk }}"
                                                                               name="assignedClients"
                                                                               type="checkbox"
                                                                               disabled
                                                                               class="{{ BW_FULL_INPUT_CSS_CLASSES }} border-gray-200 rounded text-blue-600 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:checked:bg-blue-500 dark:checked:border-blue-500 dark:focus:ring-offset-gray-800"
                                                                               aria-describedby="client-{{ client.pk }}-description" />
                                                                    </div>
                                                                    <label for="client-{{ client.pk }}" class="ml-3">
                                                                        <span class="block text-sm font-semibold text-gray-800 dark:text-gray-300">{{ client.name|safe }}</span>
                                                                        <span id="client-{{ client.pk }}-description"
                                                                              class="block text-sm text-gray-600 dark:text-gray-500">
                                                                            {{ client.industry|safe }}
                                                                            <!-- <br /> -->
                                                                            {% if client.categories.all %}
                                                                                {% for category in client.categories.all %}
                                                                                    <span class="inline-flex items-center gap-1 py-1 px-3 rounded-full text-xs font-medium bg-gray-100 text-gray-600 mx-2">{{ category.name }}</span>
                                                                                {% endfor %}
                                                                            {% endif %}
                                                                        </span>
                                                                    </label>
                                                                </div>
                                                            {% endfor %}
                                                        </div>
                                                        <!-- End Grid -->
                                                    </fieldset>
                                                    <div class="mt-5 flex justify-end gap-x-2">
                                                        <button type="submit"
                                                                form="assignedClientsForm"
                                                                disabled
                                                                class="{{ BW_FULL_INPUT_CSS_CLASSES }} py-2 px-3 inline-flex justify-center items-center gap-2 rounded-md border border-transparent font-semibold bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                                                            {% translate "Assign" %}
                                                        </button>
                                                    </div>
                                                </form>
                                            {% else %}

                                                {% include "bw_ui_components/global/empty_card.html" with label="clients" %}

                                            {% endif %}
                                        </div>
                                        <!-- End Card -->
                                        <!-- End Card Section -->
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {# End Tabs #}
                </div>
            </div>
        </div>
    </div>
    {# Start Models #}
    {# Start create assignment modal #}
    {% bw_js_modal modal_css_id="createAssignmentModal" modal_size="sm" modal_title="Create new assignment" is_submit_btn_enabled=True is_form_modal=True form_object=special_assignment_form is_upload_form=True form_id="createAssignmentForm" form_submit_text="Create" action_url="dashboard:special_assignment:api:special-assignment-api-router-list" %}
    {# End create assignment modal #}
    {# End Models #}
{% endblock dashboard_content_block %}
